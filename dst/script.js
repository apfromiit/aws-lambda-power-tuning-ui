"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){return"undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"]?Array.from(e):void 0}function _arrayWithoutHoles(e){return Array.isArray(e)?_arrayLikeToArray(e):void 0}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(s){l=!0,o=s}finally{try{i||null==r["return"]||r["return"]()}finally{if(l)throw o}}return a}}function _arrayWithHoles(e){return Array.isArray(e)?e:void 0}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function o(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==r["return"]||r["return"]()}finally{if(l)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);t>r;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _typeof(e){"@babel/helpers - typeof";return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function encode(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Float32Array;return e=new t(e),e instanceof Uint8Array||(e=new Uint8Array(e.buffer)),base64js.fromByteArray(e)}function decode(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Float32Array;return Array.from(new t(base64js.toByteArray(e).buffer))}function customTooltip(e){var t=document.getElementById("tooltip"),r=document.getElementById("tooltip-power"),n=document.getElementById("tooltip-time-1"),o=document.getElementById("tooltip-cost-1"),a=document.getElementById("tooltip-time-2"),i=document.getElementById("tooltip-cost-2"),l=document.getElementById("tooltip-separator");if(0===e.opacity)return t.style.display="none",void 0;var s=e.dataPoints[0].label,c=smartRound(parseFloat(e.dataPoints[0].value)),u=smartRound(parseFloat(e.dataPoints[1].value),2);if(r.innerHTML="Power: ".concat(s),n.innerHTML="Time: ".concat(c,"ms"),o.innerHTML="Cost: ".concat(u,"$"),e.dataPoints[2]&&e.dataPoints[2].value){var d=smartRound(parseFloat(e.dataPoints[2].value)),y=smartRound(parseFloat(e.dataPoints[3].value),2),f=smartRound(100*d/c)-100,m=smartRound(100*y/u)-100,p=0>f?"faster":"slower",h=m>0?"more expensive":"cheaper";a.innerHTML="Time: ".concat(d,"ms (").concat(Math.sign(f)*f,"% ").concat(p,")"),i.innerHTML="Cost: ".concat(y,"$ (").concat(Math.sign(m)*m,"% ").concat(h,")"),a.style.display="block",i.style.display="block",l.style.display="block"}else a.style.display="none",i.style.display="none",l.style.display="none";var b=this._chart.canvas.getBoundingClientRect();t.style.display="block",t.style.left=b.left+window.pageXOffset+e.caretX+"px",t.style.top=b.top+window.pageYOffset+e.caretY+"px",t.style.fontFamily=e._bodyFontFamily,t.style.fontSize=e.bodyFontSize+"px",t.style.fontStyle=e._bodyFontStyle,t.style.pointerEvents="none"}function smartRound(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1e-12>e)return e.toFixed(t).replace(/(\.0*[1-9]+)[0]+$|\.[0]+$/,"$1");var r=Math.max(-Math.round(Math.log10(e))+t,0),n=e.toFixed(r);return n.replace(/(\.0*[1-9]+)[0]+$|\.[0]+$/,"$1")}(function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.base64js=e()}})(function(){return function(){function e(t,r,n){function o(i,l){if(!r[i]){if(!t[i]){var s="function"==typeof require&&require;if(!l&&s)return s(i,!0);if(a)return a(i,!0);var c=Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[i]={exports:{}};t[i][0].call(u.exports,function(e){var r=t[i][1][e];return o(r||e)},u,u.exports,e,t,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;n.length>i;i++)o(n[i]);return o}return e}()({"/":[function(e,t,r){function n(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function o(e){var t=n(e),r=t[0],o=t[1];return 3*(r+o)/4-o}function a(e,t,r){return 3*(t+r)/4-r}function i(e){var t,r,o=n(e),i=o[0],l=o[1],s=new y(a(e,i,l)),c=0,u=l>0?i-4:i;for(r=0;u>r;r+=4)t=d[e.charCodeAt(r)]<<18|d[e.charCodeAt(r+1)]<<12|d[e.charCodeAt(r+2)]<<6|d[e.charCodeAt(r+3)],s[c++]=255&t>>16,s[c++]=255&t>>8,s[c++]=255&t;return 2===l&&(t=d[e.charCodeAt(r)]<<2|d[e.charCodeAt(r+1)]>>4,s[c++]=255&t),1===l&&(t=d[e.charCodeAt(r)]<<10|d[e.charCodeAt(r+1)]<<4|d[e.charCodeAt(r+2)]>>2,s[c++]=255&t>>8,s[c++]=255&t),s}function l(e){return u[63&e>>18]+u[63&e>>12]+u[63&e>>6]+u[63&e]}function s(e,t,r){for(var n,o=[],a=t;r>a;a+=3)n=(16711680&e[a]<<16)+(65280&e[a+1]<<8)+(255&e[a+2]),o.push(l(n));return o.join("")}function c(e){for(var t,r=e.length,n=r%3,o=[],a=16383,i=0,l=r-n;l>i;i+=a)o.push(s(e,i,i+a>l?l:i+a));return 1===n?(t=e[r-1],o.push(u[t>>2]+u[63&t<<4]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(u[t>>10]+u[63&t>>4]+u[63&t<<2]+"=")),o.join("")}r.byteLength=o,r.toByteArray=i,r.fromByteArray=c;for(var u=[],d=[],y="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=0,p=f.length;p>m;++m)u[m]=f[m],d[f.charCodeAt(m)]=m;d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},{}]},{},[])("/")});var App=function(){function e(){_classCallCheck(this,e),_defineProperty(this,"chartColors",{red:"rgb(255, 99, 132)",blue:"rgb(54, 162, 235)",orange:"rgb(255, 165, 00)",green:"rgb(34, 139, 34)"}),_defineProperty(this,"chartOptions",{responsive:!0,hoverMode:"index",tooltips:{mode:"index",intersect:!1,enabled:!1,custom:customTooltip},stacked:!1,title:{display:!1},scales:{xAxes:[{scaleLabel:{display:!0,labelString:"Memory / Power (MB)"}}],yAxes:[{ticks:{beginAtZero:!0,callback:function(e){return"".concat(smartRound(e)," ms")}},type:"linear",display:!0,scaleLabel:{display:!0,labelString:"Invocation Time"},position:"left",id:"time-axis"},{ticks:{beginAtZero:!0,callback:function(e){return"".concat(smartRound(e)," $")}},type:"linear",display:!0,position:"right",id:"cost-axis",scaleLabel:{display:!0,labelString:"Invocation Cost"},gridLines:{drawOnChartArea:!1}}]}}),this.canvas=document.querySelector("canvas"),this.report_el=document.getElementById("report"),this.error_el=document.getElementById("error")}return _createClass(e,[{key:"error",value:function(e){this.report_el.style.display="none",this.error_el.style.display="flex";var t="https://github.com/matteo-ronchetti/aws-lambda-power-tuning-ui";switch(e){case"empty":var r=window.location.protocol+"//"+window.location.host+"#"+encode([128,256,512,1024],Int16Array)+";"+encode([36555.39,18441.58,8539.34,3870.76])+";"+encode([7612e-8,7696e-8,7155e-8,6489e-8]);document.getElementById("error-title").innerHTML="Error: URL must contain data in the hash!",document.getElementById("error-msg").innerHTML="Your URL is ".concat(window.location,' and should be something like <a href="').concat(r,'" class="dont-break-out">').concat(r,'</a><br>Please refer to the <a href="').concat(t,'">documentation</a>.');break;case"malformed":document.getElementById("error-title").innerHTML="Error: malformed URL parameters!",document.getElementById("error-msg").innerHTML="Please check your URL parameters, refer to the <a href='${doc_url}#url-query-string-format'>documentation</a>.";break;default:document.getElementById("error-title").innerHTML="Error",document.getElementById("error-msg").innerHTML="Please check your URL parameters"}}},{key:"parseHash",value:function(e){var t=e.split(";"),r=decode(t[0],Int16Array),n=decode(t[1]),o=decode(t[2]);return{powers:r,times:n,costs:o}}},{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{var n=this.parseHash(e)}catch(o){return console.error(o),this.error("malformed"),void 0}if(t)try{var a=this.parseHash(t)}catch(o){return console.error(o),this.error("malformed"),void 0}this.report_el.style.display="flex",this.error_el.style.display="none",this.showCards(n);var i=n.powers;if(t){i=n.powers.concat(a.powers),i=i.filter(function(e,t){return i.indexOf(e)===t}),i.sort(function(e,t){return e-t});var l,s=_createForOfIteratorHelper(i.entries());try{for(s.s();!(l=s.n()).done;){var c=_slicedToArray(l.value,2),u=c[0],d=c[1];n.powers.includes(d)||(n.times.splice(u,0,null),n.costs.splice(u,0,null)),a.powers.includes(d)||(a.times.splice(u,0,null),a.costs.splice(u,0,null))}}catch(y){s.e(y)}finally{s.f()}}var f={labels:i,datasets:[{label:"Invocation Time (ms)",borderColor:this.chartColors.red,backgroundColor:this.chartColors.red,fill:!1,data:n.times,yAxisID:"time-axis"},{label:"Invocation Cost (USD)",borderColor:this.chartColors.blue,backgroundColor:this.chartColors.blue,fill:!1,data:n.costs,yAxisID:"cost-axis"}]};if(t){var m;(m=f.datasets).push.apply(m,[{label:"Invocation Time ".concat(r+" ","(ms)"),borderColor:this.chartColors.orange,backgroundColor:this.chartColors.orange,fill:!1,data:a.times,yAxisID:"time-axis"},{label:"Invocation Cost ".concat(r+" ","(USD)"),borderColor:this.chartColors.green,backgroundColor:this.chartColors.green,fill:!1,data:a.costs,yAxisID:"cost-axis"}])}this.myLine&&this.myLine.destroy();var p=this.canvas.getContext("2d");this.myLine=Chart.Line(p,{data:f,options:this.chartOptions})}},{key:"showCards",value:function(e){var t=.5,r=Math.max.apply(Math,_toConsumableArray(e.costs)),n=Math.max.apply(Math,_toConsumableArray(e.times)),o=e.powers.map(function(o,a){return{size:o,time:e.times[a],cost:e.costs[a],value:t*e.costs[a]/r+(1-t)*e.times[a]/n}});o.sort(function(e,t){return e.time-t.time}),document.getElementById("min-time").innerHTML="".concat(o[0].size,"MB"),document.getElementById("max-time").innerHTML="".concat(o[o.length-1].size,"MB"),o.sort(function(e,t){return e.cost-t.cost}),document.getElementById("min-cost").innerHTML="".concat(o[0].size,"MB"),document.getElementById("max-cost").innerHTML="".concat(o[o.length-1].size,"MB"),o.sort(function(e,t){return e.value-t.value}),document.getElementById("balanced").innerHTML="".concat(o[0].size,"MB")}}]),e}();